{"version":3,"sources":["../lib/nodemailer.es6"],"names":["Nodemailer","smtpConfig","host","port","auth","Error","config","transporter","createTransport","mailOpions","to","from","_createTransport","ninvoke"],"mappings":"AAAA;;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;AAEA;;;;;;IAMaA,U,WAAAA,U;;AAEX;;;;AAIA,sBAAYC,UAAZ,EAAwB;AAAA;;AACtB,QAAI,CAACA,UAAD,IAAe,CAACA,WAAWC,IAA3B,IAAmC,CAACD,WAAWE,IAA/C,IAAuD,CAACF,WAAWG,IAAvE,EAA6E;AAC3E,YAAM,IAAIC,KAAJ,CAAU,qBAAV,CAAN;AACD;AACD,SAAKC,MAAL,GAAcL,UAAd;AACA,SAAKM,WAAL,GAAmB,IAAnB;AACD;;AAED;;;;;;;;;uCAKmB;AACjB,WAAKA,WAAL,GAAmB,qBAAWC,eAAX,CAA2B,uCAAc,KAAKF,MAAnB,CAA3B,CAAnB;AACD;;AAED;;;;;;;;;yBAMKG,U,EAAY;;AAEf,UAAI,CAACA,UAAD,IAAe,CAACA,WAAWC,EAA3B,IAAiC,CAACD,WAAWE,IAAjD,EAAuD;AACrD,cAAM,IAAIN,KAAJ,CAAU,oCAAV,CAAN;AACD;;AAED,UAAI,CAAC,KAAKE,WAAV,EAAuB;AACrB,aAAKK,gBAAL;AACD;;AAED,aAAO,YAAEC,OAAF,CAAU,KAAKN,WAAf,EAA4B,UAA5B,EAAwCE,UAAxC,CAAP;AACD","file":"nodemailer.js","sourcesContent":["\"use strict\";\n\nimport Q from \"q\";\nimport nodemailer from \"nodemailer\";\nimport smtpTransport from \"nodemailer-smtp-transport\";\n\n/**\n * Represents the Nodemailer which is capable of sending mail using custom SMTP server\n * @public\n * @class\n */\n\nexport class Nodemailer {\n\n  /**\n   * @constructor\n   * @param {object} smtpConfig - smtp server configuration\n   */\n  constructor(smtpConfig) {\n    if (!smtpConfig || !smtpConfig.host || !smtpConfig.port || !smtpConfig.auth) {\n      throw new Error(\"SMTP config missing\");\n    }\n    this.config = smtpConfig;\n    this.transporter = null;\n  }\n\n  /**\n   * It creates the smtp transporter\n   * @private\n   * @returns {undefined} Void.\n   */\n  _createTransport() {\n    this.transporter = nodemailer.createTransport(smtpTransport(this.config));\n  }\n\n  /**\n   * It sends mail to recipient using smtp transporter\n   * @param {object} mailOpions - mail options for sending the Email.\n   * @public\n   * @returns {Q.Promise<void>} Promise whether or not the mail send is OK.\n   */\n  send(mailOpions) {\n\n    if (!mailOpions || !mailOpions.to || !mailOpions.from) {\n      throw new Error(\"mail options not supplied properly\");\n    }\n\n    if (!this.transporter) {\n      this._createTransport();\n    }\n\n    return Q.ninvoke(this.transporter, \"sendMail\", mailOpions);\n  }\n}\n"]}